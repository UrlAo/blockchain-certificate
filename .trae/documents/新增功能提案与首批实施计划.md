## 背景概述
- 当前系统已支持：管理员发行（`contracts/Certificate.sol:28-45`）、验证（`contracts/Certificate.sol:64-81`）、前端静态交互（`frontend/issuer.html:295-305`、`frontend/verifier.html:258-261`）。
- 建议优先补齐合规、可运维与易用性能力，随后扩展批量与跨网络能力。

## 优先级建议（从高到低）
1. 证书撤销与状态管理（高）：允许管理员撤销已发行证书，并在验证时显示“已撤销”。
2. 多发行人管理（高）：支持将多个地址设为发行人，管理员可增删，降低单点风险。
3. 前端配置抽离（高）：将合约地址与 ABI 从页面硬编码改为统一配置/动态加载，减少维护成本。
4. 单元测试完善（高）：补齐 Hardhat 测试用例，覆盖发行、验证、撤销与权限边界。
5. 批量发行（中）：支持一次发行多个证书，面向机构批量上链场景。
6. 事件查询与审核（中）：前端展示发行/撤销事件列表，便于审计。
7. 证明文件导出（中）：生成包含 `certHash/contractAddress/chainId/blockNumber` 的 JSON 证明，便于线下校验。
8. IPFS 集成（中）：在发行时保存 `ipfsCid`，前端可跳转原始文件。
9. 跨网络与部署脚本增强（中）：一键部署到 Testnet（如 Sepolia），并自动写入前端配置。

## 技术实现要点（首批拟实施 1-4）
### 1) 证书撤销与状态管理
- 合约：在 `Certificate` 结构中新增 `revoked: bool`、`revokeReason: string`、`revokeDate: uint256`（修改点位于 `contracts/Certificate.sol:7-13` 附近）。
- 新增方法：`revokeCertificate(bytes32 _certHash, string memory _reason)`（`onlyAdmin`），并发出事件 `CertificateRevoked(certHash, reason)`（新增事件定义与函数位于 `contracts/Certificate.sol:83` 之后）。
- 验证逻辑：`verifyCertificate(...)` 在 `contracts/Certificate.sol:69-76` 处读取状态，若 `revoked` 返回无效并附带撤销信息。

### 2) 多发行人管理
- 合约：新增 `mapping(address => bool) issuers`，`modifier onlyIssuer()`；管理员可 `addIssuer(address)` / `removeIssuer(address)`；`issueCertificate(...)` 改为 `onlyIssuer`（保留管理员默认作为发行人）。
- 无需引入外部库即可完成，后续可平滑迁移到 OpenZeppelin `AccessControl`。

### 3) 前端配置抽离
- 统一使用 `frontend/config.js` 提供 `contractAddress`；通过 `fetch('/abi.json')` 动态加载 ABI，`issuer.html` 与 `verifier.html` 不再内嵌 ABI。
- 页面初始化位置：`frontend/issuer.html:247-253` 与 `frontend/verifier.html:222-227`。

### 4) 单元测试完善
- 新增 `test/certificate.test.ts`：覆盖
  - 仅发行人可发行；非授权地址应失败
  - 发行后验证返回有效信息
  - 撤销后验证返回无效与撤销原因
  - 批量发行（预留用例骨架）

## 变更影响与兼容
- 存储结构变更：`Certificate` 结构扩展但保持向后兼容（新字段默认零值）。
- 前端：改为从配置与 `abi.json` 加载；需要一次性替换页面中的 `contractABI` 与地址常量。
- 部署：本地流程不变；合约变更需重新编译与部署。

## 验证方案
- 本地链上运行完整流程：发行 → 验证 → 撤销 → 再次验证（应显示已撤销）。
- 事件审计：在前端新增“审核”标签页，读取 `CertificateIssued` / `CertificateRevoked` 事件并分页展示。
- 单元测试通过并生成覆盖率报告。

## 下一步执行
- 若确认本计划，我将按以上 1-4 项依次实现：
  - 修改合约与事件、编译并部署本地
  - 调整前端为动态配置与 ABI 加载
  - 编写并运行测试，验证关键路径
  - 交付使用说明（README 更新对应章节）

请确认是否按此计划实施；如需调整优先级或新增功能（如 IPFS/批量发行/跨网络），我可同步纳入。